@model (List<site.diogocosta.dev.Models.VideoCarreira> Videos, NewsletterSubscription Newsletter)
@{
    ViewData["Title"] = "Carreira";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
    // Criar modelo para o formulário
    var newsletterModel = new site.diogocosta.dev.Models.NewsletterSubscription();
}

<div class="bg-blue-600 text-white py-24">
    <div class="container mx-auto px-4 max-w-4xl text-center">
        <h1 class="text-5xl font-display mb-4">Carreira e Opiniões</h1>
        <p class="text-xl mb-8">Aqui compartilho um pouco da minha trajetória, aprendizados e reflexões sobre o mundo da tecnologia e desenvolvimento.</p>
    </div>
</div>

<div class="bg-[#0A192F] py-16">
    <div class="container mx-auto px-4">
        @if (Model.Videos == null || !Model.Videos.Any())
        {
            <div class="text-center py-16">
                <p class="text-white text-xl">Nenhum vídeo encontrado.</p>
            </div>
        }
        else
        {
            <div class="space-y-16">
                @for (int i = 0; i < Model.Videos.Count; i++)
                {
                    var video = Model.Videos[i];
                    var isEven = i % 2 == 0;
                    
                    <div class="bg-gray-900 rounded-xl overflow-hidden shadow-lg border border-gray-800">
                        <div class="grid grid-cols-1 md:grid-cols-2 @(isEven ? "" : "md:grid-flow-dense")">
                            <!-- Vídeo -->
                            <div class="@(isEven ? "" : "md:col-start-2") h-full">
                                @if (!string.IsNullOrWhiteSpace(video.UrlVideo))
                                {
                                    <div class="aspect-video w-full">
                                        <iframe class="w-full h-full"
                                                src="@video.UrlVideo" 
                                                title="@video.Titulo" 
                                                frameborder="0" 
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                                allowfullscreen>
                                        </iframe>
                                    </div>
                                }
                                else
                                {
                                    <div class="aspect-video w-full bg-gray-800 flex items-center justify-center">
                                        <p class="text-gray-400">URL do vídeo inválida</p>
                                    </div>
                                }
                            </div>
                            
                            <!-- Conteúdo -->
                            <div class="@(isEven ? "" : "md:col-start-1") p-8 flex flex-col justify-center">
                                <h2 class="text-2xl font-display text-white mb-4">@video.Titulo</h2>
                                <p class="text-gray-300 mb-6">@video.Descricao</p>
                                <div class="flex items-center text-gray-400 text-sm">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <span>Publicado em: @video.DataPublicacao.ToString("dd/MM/yyyy")</span>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>

<!-- CTA para inscrição -->
<div class="bg-blue-600 py-24">
    <div class="container mx-auto px-4 text-center max-w-2xl">
        <h2 class="text-4xl font-display text-white mb-8">Aprenda com a experiência.</h2>
        <div class="bg-white rounded-lg p-8">
            <h3 class="text-2xl font-display mb-4">Inscreva-se para receber atualizações.</h3>
            <p class="text-gray-600 mb-6">Receba notificações quando novos vídeos e artigos sobre carreira e desenvolvimento forem publicados, além de dicas exclusivas que não compartilho em outros lugares.</p>
            
            @{
                ViewBag.FormId = "carreiraForm";
            }
            <partial name="_NewsletterForm" />
            
            @*
            @if (TempData["Success"] != null)
            {
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
                    <span class="block sm:inline">@TempData["Success"]</span>
                </div>
            }

            @if (TempData["Error"] != null)
            {
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                    <span class="block sm:inline">@TempData["Error"]</span>
                </div>
            }
            *@
        </div>
    </div>
</div> 

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Verificar se a função global está disponível (carregada pelo newsletter.js)
            if (typeof window.processNewsletterForm === 'function') {
                // Usar a função global para processar o formulário
                var carreiraForm = document.getElementById('carreiraForm');
                if (carreiraForm) {
                    window.processNewsletterForm(carreiraForm, '@Url.Action("Newsletter", "Carreira")');
                }
            }
        });
    </script>
} 
